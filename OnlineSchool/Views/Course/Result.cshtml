@model OnlineSchool.Models.AttemptResultModel
@{
    ViewData["Title"] = "Grade Attempt";
}
<div class="container">
    @if (Model == null)
    {
        <div class="card login-card centralized-card" style="margin-top:50px">
            <div class="card-body text-center font-weight-bolder">
                No result yet
            </div>
        </div>
    }
    else
    {
        <div class="my-4">
            <a asp-action="index">Home</a> >> <a asp-controller="course" asp-action="view" asp-route-id="@Model.Exam.CourseId">@Model.Exam.CourseCode</a>
            >> <span class="breadcrum-link">Result</span>
        </div>

        <div class="mt-4 card box-shadow mb-3">
            <div class="card-body">
                <div style="text-transform:uppercase;font-size:20px;font-weight:600">
                    @Model.Exam.CourseTitle | @Model.Exam.CourseCode
                </div>
                <div>
                    @Model.Exam.Title
                </div>
                <div style="font-size:17px;font-weight:600">
                    @Model.Attempt.StudentScore / @Model.Attempt.TotalGrade
                </div>
            </div>
        </div>


        <div class="mt-4 card box-shadow mb-3">
            <div class="card-body">
                <div style="text-transform:uppercase;font-size:20px;font-weight:600">
                    @Model.Attempt.StudentMatricNumber | @Model.Attempt.StudentFullname
                </div>
            </div>
        </div>

        <div class="row">
            @foreach (var mcq in Model.Exam.McqQuestions)
            {
                <div class="col-md-6">
                    <div class="card box-shadow my-2">
                        <div class="card-body">
                            <div style="font-size:17px;font-weight:600">
                                @mcq.Question
                            </div>
                            <hr class="m-0" />
                            @foreach (var option in mcq.Options)
                            {
                                string optionClass = "";
                                if (option.AnsId == mcq.CorrectAnswerId)
                                {
                                    optionClass = "correct-answer";
                                }
                                else if (option.AnsId == mcq.SelectedOptionId)
                                {
                                    optionClass = "wrong-answer";
                                }
                                <div class="@optionClass p-1 my-1">
                                    @option.Option
                                </div>
                            }
                            @if (mcq.SelectedOptionId == -1)
                            {
                                <div class="wrong-answer">
                                    no option selected
                                </div>
                            }
                        </div>
                        <hr class="m-0" />
                        <div class="st-foot text-right my-1 mr-3">
                            [@mcq.Score marks]
                        </div>
                    </div>
                </div>
            }
        </div>

        @for (int i = 0; i < Model.Exam.TheoryQuestions.Count(); i++)
        {
            <div class="card box-shadow my-2">
                <div class="card-body pb-0">
                    <div style="font-size:17px;font-weight:600">
                        @Model.Exam.TheoryQuestions[i].Question
                    </div>
                    <hr class="m-0" />
                    <textarea class="form-control" rows="6" readonly>@Model.Exam.TheoryQuestions[i].Answer</textarea>
                    <hr class="m-0" />
                    <div class="float-right d-block my-1">
                        @{
                            <label class="font-weight-bold">Score:</label> <span>@Model.Exam.TheoryQuestions[i].StudentScore</span>
                        }

                    </div>
                </div>
                <hr class="m-0" />
                <div class="st-foot text-right my-1 mr-3">
                    [@Model.Exam.TheoryQuestions[i].Score marks]
                </div>
            </div>
        }
    }
</div>




@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}


<style>
    .correct-answer {
        background-color: #28a745;
        color: white;
    }

    .wrong-answer {
        background-color: #dc3545;
        color: white;
    }
</style>
